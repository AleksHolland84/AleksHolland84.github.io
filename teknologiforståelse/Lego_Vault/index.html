<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lego Vault</title>
    
    <!-- Link to google font--> 
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <!-- link to style.css --> 
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/terminal.css">

</head>
<body onload="runOnLoad(); showChapterHeaders();">
  <div class="content-wrapper">

    <header>
      <div class="nav">
        <a href="index.html" title="Home directory">
          /home
        </a>
        <a target="_blank" href="mailto:muninn@WubbaLubbaDubDub.com" title="Mail">
          /contact
        </a>  
      </div>
      
      <a class="svglink" target="_blank" href="https://facebook.com" title="Facebook">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.258,4.458c0-0.144,0.02-0.455,0.06-0.931c0.043-0.477,0.223-0.976,0.546-1.5c0.32-0.522,0.839-0.991,1.561-1.406 C11.144,0.208,12.183,0,13.539,0h3.82v4.163h-2.797c-0.277,0-0.535,0.104-0.768,0.309c-0.231,0.205-0.35,0.4-0.35,0.581v2.59h3.914 c-0.041,0.507-0.086,1-0.138,1.476l-0.155,1.258c-0.062,0.425-0.125,0.819-0.187,1.182h-3.462v11.542H8.258V11.558H5.742V7.643 h2.516V4.458z"/>
          </svg>
        </a>
        
      <a class="svglink" target="_blank" href="https://Github.com" title="Github">
        <svg viewBox="71 71 370 370">
          <path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"/>
        </svg>
      </a>
      
      <a class="svglink" target="_blank" href="https://linkedin.com" title="LinkedIn">
        <svg viewBox="71 71 370 370">
          <path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5 -18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5C171.1 107.9 186.4 123.4 186.4 142.4zM181.4 201.3h-57.8V388.1h57.8V201.3zM273.8 201.3h-55.4V388.1h55.4c0 0 0-69.3 0-98 0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9 0 26.9 0 98 0 98h57.5c0 0 0-68.2 0-118.3 0-50-28.3-74.2-68-74.2 -39.6 0-56.3 30.9-56.3 30.9v-25.2H273.8z"/>
        </svg>
      </a>
    </header>
  
  
    <div class="main-content-container">
      <div class="intro-header">
        <div id="__chapter" class="__chapter_menu_container">
        </div>
      
          
        <div class="contact"> 
          <p>Forfatter: A. H. Johansen</p>
          
          <a class="svglink" target="_blank" href="mailto:muninn@WubbaLubbaDubDub.com" title="Mail">
            <svg viewBox="71 71 370 370">
              <path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z"/>
            </svg>
          </a>
        </div>
        <p class="updated">19.11.2025</p>

      </div>
    </div>
  </div>

    <!-- ########################MAIN CONTENT###################################-->
    <!-- ########################MAIN CONTENT###################################-->
    <!-- ########################MAIN CONTENT###################################-->
  
    <div class="main-content-menu">
      <div class="content-wrapper">

        <div class="main-content-right-wrapper">
            <div id="nav" class="main-content-right">
            <ul class="top">
                <li class="menu_side">Indhold</li>
                <li class="menu_side">Resourcer</li>
                <li class="menu_side">Til læreren</li>
                <li class="menu_side">Fælles Mål</li>
            </ul>

            <div class="menu_text main-menu-content-text" style="display: flex; flex-direction: column" alt="Kapiteler">
                <div id="chapter-headers-container">
                <!-- gets content from script: showChapterHeaders() which is loaded onload of the body-->

                </div>
            </div>      


            <!-- #### MENU RESOURCER -->
            <div id="download" class="menu_text main-menu-content-text">
                <h2>Downloads</h2>
                <div class="download-wrapper">

                <div class="download-chapter-container">
                  <h4 class="menu-chapter-number-style" style="font-size:0.9em;">Kapitel 1</h4>
                  <a class="file" href="uploads/lego_vault.zip" download>
                    <button class="download-file">
                      <img src="images/zip.svg" style="width:22px;">
                      <span class="file-name">lego_vault.zip</span>
                      <i class="fa fa-download"></i>
                      <p>Til læreren - <span class="put-file-name">error - can't get file name</span></p>
                    </button>
                  </a>
                </div>

                <div class="download-chapter-container">
                  <h4 class="menu-chapter-number-style" style="font-size:0.9em;">Kapitel 1</h4>
                  <a class="file" href="uploads/Lego Vault Poster.pdf" download>
                    <button class="download-file">
                      <svg width="18" height="18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                      viewBox="0 0 56 54" style="enable-background:new 0 0 56 54;" xml:space="preserve">
                      <style type="text/css"> .st0{fill:#FA0F00;}.st1{fill:#FFFFFF;}</style>
                      <g id="Layer_1">
                        <title>PDF</title>
                        <path class="st0" d="M9.9,0h36.2C51.6,0,56,4.4,56,9.9v34.2c0,5.5-4.4,9.9-9.9,9.9H9.9C4.4,54,0,49.6,0,44.1V9.9
                              C0,4.4,4.4,0,9.9,0z"/></g>
                        <path id="_64" class="st1" d="M45,31.2c-2.6-2.7-9.7-1.6-11.4-1.4c-2.5-2.4-4.2-5.3-4.8-6.3c0.9-2.7,1.5-5.4,1.6-8.3
                          c0-2.5-1-5.2-3.8-5.2c-1,0-1.9,0.6-2.4,1.4c-1.2,2.1-0.7,6.3,1.2,10.6c-1.1,3.1-2.1,6.1-4.9,11.4c-2.9,1.2-9,4-9.5,7
                          c-0.2,0.9,0.1,1.8,0.8,2.5c0.7,0.6,1.6,0.9,2.5,0.9c3.7,0,7.3-5.1,9.8-9.4c2.1-0.7,5.4-1.7,8.7-2.3c3.9,3.4,7.3,3.9,9.1,3.9
                          c2.4,0,3.3-1,3.6-1.9C46,33.1,45.7,32,45,31.2z M42.5,32.9c-0.1,0.7-1,1.4-2.6,1c-1.9-0.5-3.6-1.4-5.1-2.6
                          c1.3-0.2,4.2-0.5,6.3-0.1C41.9,31.4,42.7,31.9,42.5,32.9z M25.8,12.3c0.2-0.3,0.5-0.5,0.8-0.5c0.9,0,1.1,1.1,1.1,2
                          c-0.1,2.1-0.5,4.2-1.2,6.2C25,16,25.3,13.2,25.8,12.3z M25.6,31.7c0.8-1.6,1.9-4.4,2.3-5.6c0.9,1.5,2.4,3.3,3.2,4.1
                          C31.1,30.3,28,30.9,25.6,31.7z M19.7,35.7c-2.3,3.8-4.7,6.2-6,6.2c-0.2,0-0.4-0.1-0.6-0.2c-0.3-0.2-0.4-0.5-0.3-0.9
                          C13.1,39.4,15.7,37.5,19.7,35.7z"/>
                      </svg>
                      <span class="file-name">PDF - Lego Vault poster</span>
                      <i class="fa fa-download"></i>
                      <p>Til læreren - <span class="put-file-name">error - can't get file name</span></p>
                    </button>
                  </a>
                </div>

              </div>
            </div>
                

            <!-- #### TIL LÆREREN ####-->
            <div id="til-læreren" class="menu_text main-menu-content-text">
              <h2>Til læreren</h2>
              <h4 style="margin-bottom:5px;">Om forløbet</h4>
              <p>Lego_vault er et undervisnings- og hobbyprojekt, der kombinerer LEGO SPIKE, Raspberry Pi og Python for at illustrere hacking-koncepter på en interaktiv og fysisk måde</p>              
              <h4>Lærervejledning til forløbet</h4>
              <div>
                <button class="collapsible menu-chapter-number-style"><span style="font-weight: 800;">kapitel 1 <span style="color:rgb(105, 105, 105)">- Til læreren</span></span></button>
                <div class="collapsible-content">
                    <h3>Formål og inspiration</h3>
                    <p>Projektet bygger videre på LEGO SPIKE-lektioner under navnet Keep It Safe, hvilket tydeliggør dets oprindelige pædagogiske fundament <a href="https://github.com/AleksHolland84/Lego_vault">GitHub</a>. Det tilføjer en Raspberry Pi med Build HAT, som muliggør programmerbar interaktion med LEGO SPIKE-komponenter.</p>
                    <section>
                      <h3>Hvad består projektet af?</h3>
                      <h4>Komponenter:</h4>
                      <ul>
                        <li>LEGO Education SPIKE Prime-sæt</li>
                        <li>Raspberry Pi Build HAT</li>
                        <li>Raspberry Pi 4 Model B</li>
                        <li>Strømforsyning til Build HAT</li>
                      </ul>

                      <h4>Opsætning:</h4>
                      <ul>
                        <li>Opret et Python-virtualenvironment via venv og installer bibliotekerne flask, buildhat, requests og python-dotenv.</li>
                      </ul>

                      <h4>Server og PIN-validering:</h4>
                      <ul>
                        <li>Projektet er baseret på en Flask-app (app.py), der fungerer som en bank-vault: en webserver kører på Raspberry Pi, som præsenterer en simpel PIN-indtastning via en browser i netværket. Ved korrekt PIN registreres “ACCESS” — og i LEGO-modellen åbnes en lås (fysisk aktiveret via Build HAT).</li>
                      </ul>                      
                    </section>

                    <section>
                      <h4>Hvordan passer projektet ind i 'hacking'?</h4>
                      <p>Selvom termen “hacking” ofte forbindes med digitale adgangsbrud, handler Lego_vault om sikring, PIN-validering og interaktion mellem fysisk hardware og software. Det er et fantasifyldt og pædagogisk eksempel på, hvordan digitale sikkerhedskoncepter (som PIN-niveauer og adgangskontrol) kan realiseres i LEGO og Raspberry Pi</p>
                      <p>I dette forløb lærer I ikke kun at bygge en digital bankboks med LEGO og Raspberry Pi – I lærer også, hvordan hackere kan prøve at bryde ind.</p>
                      <p>En metode hackere bruger kaldes brute force. Det betyder, at man prøver alle mulige kombinationer af adgangskoder, indtil man rammer den rigtige. Det kan I selv afprøve med et lille Python-script</p>
                    </section>

                    <section>
                      <h3>Læringsmål</h3>
                      <ul>
                        <li>Eleverne lærer, hvordan man kan koble software og hardware sammen.</li>
                        <li>Eleverne får en introduktion til grundlæggende cybersikkerhed (adgangskoder, validering, brute force).</li>
                        <li>Eleverne arbejder med problemløsning og kreativ konstruktion.</li>
                        <li>Eleverne lærer at dokumentere og forklare deres arbejde.</li>
                      </ul>
                    </section>
                </div>
              </div>  
              
            </div>

            <!-- #### FÆLLES MÅL #### -->
            <div id="fælles-mål" class="menu_text main-menu-content-text" ><h2>Fælles Mål</h2>
              <div>
                <button class="collapsible menu-chapter-number-style"><span style="font-weight: 800;">kapitel 1 <span style="color:rgb(105, 105, 105)">- Fælles Mål</span></span></button>
                <div class="collapsible-content">
                  <h2>Teknologiforståelse</h2>
                  <div class="faelles-maal-container">
                    <h3>Digital design og designprocesser</h3>
                    <h4 class="faelles-mael-niveau">Konstruktion</h4>

                    <div class="vidensmaal">
                      <p>Eleven kan med digitale teknologier konstruere digitale artefakter, der manifesterer en ide i digitalt materiale</p>
                      <p>Eleven har viden om konstruktion med digitale teknologier og om formgivning i digitale materialer ift. en ide</p>
                    </div>
                  </div>

                  <div class="faelles-maal-container">
                    <h3>Teknologisk handleevne</h3>
                    <h4 class="faelles-mael-niveau">Programmering</h4>
                    <div class="vidensmaal">
                      <p>Eleven kan læse og forstå programmer skrevet i et tekstbaseret programmeringssprog samt anvende et sådant til systematisk modifikation og konstruktion af programmer ud fra en problemspecifikation</p>
                      <p>Eleven har viden om metoder til at analysere og forudsige programmers opførsel samt teknikker til systematisk og trinvis udvikling af programmer</p>
                    </div>
                  </div>
                </div>
              </div>


            </div>
            </div>
        </div>
      </div>
    </div>

<!-- ########################MAIN CONTENT###################################-->
<!-- ########################MAIN CONTENT###################################-->
<!-- ########################MAIN CONTENT###################################-->
<!-- ########################MAIN CONTENT###################################-->
<div class="content-wrapper">
  <article>
    <section class="content borderline">
      <h1 id="microbit">Lego Vault</h1 >
        <h2>Hacking og sikkerhed med LEGO og Raspberry Pi</h2>
      <p>Byg, programmere og hack!</p>
    
      <div class="hBvBcu">
        <div data-testid="lesson_duration" class="sc-1hav87h-4 NXQeT"><svg aria-hidden="true" size="20" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="sc-eldPxv dbQSpJ"><title>CLOCK</title><path d="M24.5 24.5H35v3H21.5V11h3v13.5zm18-.5c0-10.217-8.282-18.5-18.5-18.5S5.5 13.783 5.5 24 13.782 42.5 24 42.5 42.5 34.217 42.5 24zm3 0c0 11.874-9.626 21.5-21.5 21.5S2.5 35.874 2.5 24 12.126 2.5 24 2.5 45.5 12.126 45.5 24z"></path></svg>
          ca. 4 lek.</div> 
        <div data-testid="lesson_level" class="sc-1hav87h-4 NXQeT"><svg aria-hidden="true" size="20" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="sc-eldPxv dbQSpJ"><title>BRICK</title><path d="M15.575 10.229l-4.22 1.738 12.481 5.14 12.482-5.14-4.22-1.738v.359c0 2.581-3.732 3.914-8.262 3.914s-8.261-1.333-8.261-3.914v-.36zm16.522-3.96v.715l9.66 3.979v27.605l-17.92 7.38-17.921-7.38V10.963l9.659-3.979v-.743c0-2.582 3.73-3.915 8.261-3.915 4.53 0 8.262 1.333 8.262 3.915v.028zm-3 3.122c-1.433.507-3.27.765-5.26.765-1.992 0-3.829-.258-5.262-.766v.992c.186.157.525.336.985.5 1.087.388 2.622.62 4.276.62 1.655 0 3.19-.232 4.276-.62.46-.164.799-.343.985-.5V9.39zm-3.76 32.694l13.42-5.526V14.207l-13.42 5.526v22.352zm-3 0V19.733L8.915 14.207V36.56l13.42 5.525zm5.776-36.139c-1.087-.388-2.622-.62-4.277-.62-1.655 0-3.19.232-4.276.62a4.732 4.732 0 0 0-.674.295c.18.098.406.2.674.295 1.086.388 2.621.62 4.276.62 1.655 0 3.19-.232 4.277-.62.267-.096.494-.197.674-.295-.18-.099-.407-.2-.674-.295z"></path></svg>
          Ekspert</div>
        <div data-testid="lesson_grade" class="sc-1hav87h-4 NXQeT"><svg aria-hidden="true" size="20" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" class="sc-eldPxv dbQSpJ"><title>GRADUATE</title><path d="M9.917 22.292l-6.715-4.666c-.977-.621-.937-2.107.135-2.64l20.48-10.548.687.354 19.742 10.17c1.122.51 1.178 2.033.236 2.63l-1.805 1.255v11.278h-3V20.93l-1.96 1.362v14.332l-.3.4c-.571.762-1.675 1.821-3.359 2.857-2.75 1.693-6.16 2.703-10.241 2.703-4.082 0-7.491-1.01-10.241-2.703-1.684-1.036-2.788-2.095-3.36-2.857l-.3-.4V22.292zm3 2.085v11.186c.073.076.158.161.255.255.531.51 1.188 1.025 1.976 1.51 2.288 1.407 5.156 2.257 8.669 2.257 3.513 0 6.381-.85 8.669-2.258.788-.484 1.445-1 1.976-1.51.097-.093.183-.178.256-.254V24.378l-10.9 7.574-.856-.595-10.045-6.98zm10.9 3.921L40.75 16.534 23.817 7.812 6.885 16.534l16.932 11.764zM42.94 17.661a1.42 1.42 0 0 1-.13-.066l.13.066zm-.118-2.565l-.102.07c.033-.024.067-.048.102-.07z"></path></svg>
          7.-9. klasse</div>
      </div>
    </section>   
    
    <section class="content">
      <img src="images/Vault_header.png" alt="img" width=100%>
      <h2>Design, programmere og skab.</h2>
      <p><b>Lego Vault</b> er et undervisnings- og hobbyprojekt, der kombinerer LEGO SPIKE, Raspberry Pi og Python for at illustrere hacking-koncepter på en interaktiv og fysisk måde.</p>    
    </section>

    <section class="content">
      <p>Forud for dette forløb, skal eleverne have arbejdet med LEGOs SPIKE&trade; Prime-sæt og LEGOs lektion 4 og 5 fra KICKSTART DIN VIRKSOHED undervisningsforløb:</p>
      <div class="flex-container">
        <div class="flex-item">
          <a href="https://education.lego.com/da-dk/lessons/prime-kickstart-a-business/keep-it-safe/" target="_blank">
            <img class="center-image" src="images/fåstyrpåsikkerheden.png" alt="Få styr på sikkerheden img" width=100%>
          </a>
        </div>
        <div class="flex-item">
          <a href="https://education.lego.com/da-dk/lessons/prime-kickstart-a-business/keep-it-really-safe/" target="_blank">
            <img class="center-image" src="images/fårigtigstyrpåsikkerheden.png" alt="Få styr på sikkerheden img" width=100%>
          </a>
        </div>
      </div>
    </section>
  </article>

  <section class="content">
    <div id="Introduktion" class="__chapter_menu_container">
      <h2 class="menu-chapter-title chapter-title">Introduktion</h2>      
    </div>

    <div>
      <p>Forestil dig, at du er sikkerhedschef i en bank. Din opgave er at beskytte bankboksen mod uautoriseret adgang. Kun folk med den rigtige kode kan åbne boksen. Men hvordan kan vi bygge sådan et system selv?</p>
      <p>I dette forløb bruger vi LEGO SPIKE, en Raspberry Pi og lidt programmering i Python. I bygger en lille bankboks af LEGO, som kun kan åbnes, hvis man indtaster den rigtige PIN-kode på en webside. På den måde lærer vi, hvordan digitale sikkerhedssystemer fungerer i praksis – men på en sjov og kreativ måde.</p>
      <div class="frame-container-center">
        <figure>
          <iframe width="100%" height="400px" src="https://www.youtube.com/embed/CQtliTJ41ZE?si=1lyUQ3vDWE30blFv" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>          
          <figcaption>Raspberry Pi: How to set up a Raspberry Pi</figcaption>
        </figure>
      </div>
      <p>En nem og sikker måde at komme i gang med Linux, er at benytte en Raspberry Pi. <br>
        Følg evt. <a style="font-weight: 600"href="https://www.raspberrypi.com/documentation/computers/getting-started.html">linket</a> her, for at lære hvordan du sætter en Raspberry Pi SBC (Single-board computer) op.
        </p>
    </div>
  </section>

  <section class="content new-chapter">
    <div id="Opsætning" class="__chapter_menu_container">
      <h2 class="menu-chapter-title chapter-title">Opsætning</h2>
    </div>

    <section>
      <div id="Opsætning_rpi" class="__chapter_menu_subheader_1">
        <h3>Log ind på RPi'en</h3>
      </div>
      <p>Efter opsætningen og klargøreingen af Raspberry Pi’en, skal vi oprette et virtuelt miljø.</p>
      <p>Log ind på RPi’en - enten med SSH eller tilslut skræm, tastatur og mus. Jeg vælger at bruge SSH til at logge ind og arbejde med RPi’en igennem en terminal.</p>

      <div class="terminal">
        <div class="terminal-header">
          <span class="terminal-title">C:\Users\user></span>
          <span class="title"></span>
        </div>
        <pre><code>ssh pi@192.168.0.79</raspberry_ip></code></pre>
      </div>

      <div class="terminal">
        <div class="terminal-header">
          <span class="terminal-title">Output</span>
          <span class="title"></span>
        </div>
        <pre><code>ssh pi@192.168.0.79
The authenticity of host '192.168.0.79 (192.168.0.79)' can't be established.
ED25519 key fingerprint is SHA256:Y/chRQ2iJ5N1zoMdlNenKnwLL1FvOq3aCMgTVZrhHak.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '192.168.0.79' (ED25519) to the list of known hosts.
pi@192.168.0.79's password:
Linux raspberry 5.10.0-15-amd64 #1 SMP Debian 5.10.120-1 (2022-06-09) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Tue Mar 25 20:20:58 2025
<span class=rpi></span>
</code></pre>
      </div>


      <p>Herefter bliver jeg promptet for loginkoden for <i>pi</i> brugeren.</p>
      <p>Indtast koden og tryk på <i>Enter:</i></p>
      <p>Opdater RPi'en og installerer opdateringerne:</p>

      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code class="rpi"><span class="dir">~</span><span class="command">sudo apt update && sudo apt upgrade -y</span>
        </code></pre>
      </div>

      <p>Vi har nu klargjort vores system.</p>
    </section>

    <section> 
      <div id="Opsætning_venv" class="__chapter_menu_subheader_1">
        <h3>Oprettelse af virtuelt miljø</h3>
      </div>

      <p>Først opretter vi en mappe, hvor vi vil samle vores filer i og oprette vores virtuelle miljø.<br>
        Derefter skal vi <i>cd</i> <i>(change directory)</i> ind i mappen</p>

      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code class="rpi"><span class="dir">~</span><span class="command">mkdir LEGO_Vault</span>
<span class="rpi"><span class="dir">~</span><span class="command">cd LEGO_Vault</span></span></code>
</pre>
      </div>

      <p>Opret nu et virtuelt miljø med python-modulet: <i>venv</i>. </p>
      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code class="rpi"><span class="dir">~/LEGO_Vault</span><span class="command">python3 -m venv venv</span>
        </code></pre>
      </div>

      <div class="forklaring">
        <p>Forklaring</p>
        <ul>
          <li>python3 → vi bruger Python version 3.</li>
          <li>-m venv → beder Python om at bruge modulet venv (virtual environment).</li>
          <li>venv → navnet på det nye miljø (en mappe, der oprettes).</li>
        </ul>
      </div>
    </section>
      
      <section>
        <p>Aktivér derefter miljøet:</i>. </p>
        <div class="terminal linux">
          <div class="terminal-header-linux">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
            <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
          </div>
          <pre><code class="rpi"><span class="dir">~/LEGO_Vault</span><span class="command">. ./venv/bin/activate</span>
          </code></pre>
        </div>

        <div class="forklaring">
          <p>Forklaring</p>
          <ul>
            <li>. → betyder “kør denne fil i den nuværende terminal”.</li>
            <li>./venv/bin/activate → aktiverer det virtuelle miljø.</li>
          </ul>
        </div>

        <div class="terminal linux">
          <div class="terminal-header-linux">
            <span class="terminal-title-output">Output</span>
            <span class="title">ssh</span>
          </div>
            <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command"></span>
            </code></pre>
        </div>
      </section>

      <section>
        <p>Vi kan nu begynde at installere de moduler/pakker som vi har brug for, for at få vores projekt til at virke.</p>
        <div class="terminal linux">
          <div class="terminal-header-linux">
            <span class="dot red"></span>
            <span class="dot yellow"></span>
            <span class="dot green"></span>
            <span class="terminal-title"></span>
            <div class="title">
              <span>ssh</span>
              <button class="copy-btn">Copy</button>
            </div>
          </div>
          <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">pip install flask buildhat requests python-dotenv</span>
          </code></pre>
        </div>
        <div class="forklaring">
          <p>Forklaring</p>
          <ul>
            <li>pip → Python’s pakkehåndtering (ligner en “app store” for Python).</li>
            <li>install → kommandoen til at installere en pakke.</li>
            <li>flask, buildhat, requests, python-dotenv → navnene på de pakker vi skal bruge.</li>
          </ul>
          <p>Flask = webserver, BuildHAT = styring af LEGO-motorer, Requests = sende/modtage data over netværk, Python-dotenv = læse vores PIN fra .env-filen.</p>
        </div>      
      </section>




      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="terminal-title-output">Output</span>
          <span class="title">ssh</span>
        </div>
        <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">pip install flask buildhat requests python-dotenv</span>
Collecting flask
  Downloading flask-3.1.2-py3-none-any.whl (103 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 103.3/103.3 KB 2.3 MB/s eta 0:00:00
Collecting buildhat
  Downloading buildhat-0.9.0-py3-none-any.whl (59 kB)
     <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 59.9/59.9 KB 4.1 MB/s eta 0:00:00
Collecting requests
  Downloading requests-2.32.5-py3-none-any.whl (64 kB)
     <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 64.7/64.7 KB 3.9 MB/s eta 0:00:00
    Collecting python-dotenv
      Downloading python_dotenv-1.1.1-py3-none-any.whl (20 kB)
    Collecting click>=8.1.3
      Downloading click-8.2.1-py3-none-any.whl (102 kB)
        <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 102.2/102.2 KB 4.8 MB/s eta 0:00:00
    Collecting itsdangerous>=2.2.0
      Using cached itsdangerous-2.2.0-py3-none-any.whl (16 kB)
    Collecting markupsafe>=2.1.1
      Using cached MarkupSafe-3.0.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (20 kB)
    Collecting werkzeug>=3.1.0
      Using cached werkzeug-3.1.3-py3-none-any.whl (224 kB)
    Collecting blinker>=1.9.0
      Using cached blinker-1.9.0-py3-none-any.whl (8.5 kB)
    Collecting jinja2>=3.1.2
      Downloading jinja2-3.1.6-py3-none-any.whl (134 kB)
        <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 134.9/134.9 KB 6.2 MB/s eta 0:00:00
    Collecting gpiozero
      Downloading gpiozero-2.0.1-py3-none-any.whl (150 kB)
        <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 150.8/150.8 KB 5.9 MB/s eta 0:00:00
    Collecting pyserial
      Using cached pyserial-3.5-py2.py3-none-any.whl (90 kB)
    Collecting urllib3<3,>=1.21.1
      Downloading urllib3-2.5.0-py3-none-any.whl (129 kB)
        <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 129.8/129.8 KB 5.9 MB/s eta 0:00:00
    Collecting certifi>=2017.4.17
      Downloading certifi-2025.8.3-py3-none-any.whl (161 kB)
        <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 161.2/161.2 KB 7.0 MB/s eta 0:00:00
    Collecting idna<4,>=2.5
      Downloading idna-3.10-py3-none-any.whl (70 kB)
        <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 70.4/70.4 KB 4.9 MB/s eta 0:00:00
    Collecting charset_normalizer<4,>=2
      Downloading charset_normalizer-3.4.3-cp310-cp310-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (152 kB)
        <span style="color:rgb(11, 128, 0);">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 152.4/152.4 KB 4.0 MB/s eta 0:00:00
    Collecting colorzero
      Using cached colorzero-2.0-py2.py3-none-any.whl (26 kB)
    Requirement already satisfied: setuptools in ./venv/lib/python3.10/site-packages (from colorzero->gpiozero->buildhat) (59.6.0)
    Installing collected packages: pyserial, urllib3, python-dotenv, markupsafe, itsdangerous, idna, colorzero, click, charset_normalizer, certifi, blinker, werkzeug, requests, jinja2, gpiozero, flask, buildhat
    Successfully installed blinker-1.9.0 buildhat-0.9.0 certifi-2025.8.3 charset_normalizer-3.4.3 click-8.2.1 colorzero-2.0 flask-3.1.2 gpiozero-2.0.1 idna-3.10 itsdangerous-2.2.0 jinja2-3.1.6 markupsafe-3.0.2 pyserial-3.5 python-dotenv-1.1.1 requests-2.32.5 urllib3-2.5.0 werkzeug-3.1.3
    
    <span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command"></span>

</code></pre>
      </div>


    <section>
      <div id="Opsætning_unzip" class="__chapter_menu_subheader_1">
        <h3>Download filer og unzip</h3>
      </div>
      <p>Download med wget fra <a href="https://github.com/AleksHolland84/lego_vault_undervisning/archive/refs/heads/main.zip">github.io</a> eller overfør zip filen under <a href="uploads/lego_vault.zip">Resourcer</a> og unzip derefter den komprimerede zip-fil.</p>
      <p>Nedenunder bruger jeg wget til at hente filerne:</p>
      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">wget https://github.com/AleksHolland84/lego_vault_undervisning/archive/refs/heads/main.zip</span>
        </code></pre>
      </div>

      <div class="forklaring">
        <p>Forklaring</p>
        <ul>
          <li>wget → et værktøj til at hente/downloade filer fra internettet via kommandolinjen.</li>
        </ul>
      </div>
      
      <div>
        <button class="collapsible no-line"><span style="color:rgb(105, 105, 105)">Download zip.fil</span></button>
        <div class="collapsible-content content-route">        
          <div class="terminal linux">
            <div class="terminal-header-linux">
              <span class="dot red"></span>
              <span class="dot yellow"></span>
              <span class="dot green"></span>
              <span class="terminal-title"></span>
              <div class="title">
                <span>ssh</span>
                <button class="copy-btn">Copy</button>
              </div>
            </div>
            <pre><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">unzip lego_vault.zip</span>
            </code></pre>
          </div>

      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="terminal-title-output">Output</span>
          <span class="title">ssh</span>
        </div>
        <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">unzip lego_vault.zip</span>
Archive:  lego_vault.zip
  inflating: .env
  inflating: app.py
  creating: templates/
  inflating: templates/numpad.html
<span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command"></span>  
</code></pre>
    </div>
      <div class="forklaring">
        <p>Forklaring</p>
        <ul>
          <li>unzip → Et program/kommando der pakker .zip-filer ud.</li>
          <li>lego_vault.zip → Navnet på den zip-fil, du vil pakke ud.</li>
        </ul>
      </div>


        </div>
      </div>



      <p>List mappens indhold med <i>ls</i></p>
      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">ls -la</span>
        </code></pre>
      </div>

      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="terminal-title-output">Output</span>
          <span class="title">ssh</span>
        </div>
        <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">ls -la</span>  
total 28
drwxr-xr-x  4 pi pi 4096 Sep  2 10:14 .
drwxr-x--- 31 pi pi 4096 Sep  2 09:23 ..
-rw-rw-rw-  1 pi pi   11 Sep  2 09:47 .env
-rw-rw-rw-  1 pi pi 1950 Sep  2 09:47 app.py
-rw-rw-rw-  1 pi pi 1586 Sep  2 09:47 flask_tester.py
-rwxr-xr-x  1 pi pi 2522 Sep  2 09:41 lego_vault.zip
drwxrwxrwx  2 pi pi 4096 Sep  2 09:48 templates
drwxr-xr-x  5 pi pi 4096 Sep  2 09:24 venv
<span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command"></span>  
</code></pre>
    </div>

      <div class="forklaring">
        <p>Forklaring</p>
        <ul>
          <li>ls → Viser indholdet af en mappe (filer og mapper).</li>
          <li>-l (long format) → Viser detaljeret information om hver fil, bl.a.:</li>
          <li>-a (all) → Viser alle filer, også skjulte filer (de der starter med punktum).</li>
        </ul>
      </div>

    </section>

    <section>
      <div id="Opsætning_env" class="__chapter_menu_subheader_1">
        <h3>Opsætning af .env-fil</h3>
      </div>

      <p>Før vi kører serveren skal vi oprette, eller ændre <span class="code-ex">.env</span>-filen (findes allerede i zip-filen).<br>
      Denne fil indeholder vores PIN-kode os skal være formateret sådan her:</p>
      <span class="code-ex">pin='1234'</span>
      <p>Vi kan benytte os af <i>nano</i> til at ændre tal-koden.</p>
      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">nano .env</span>
        </code></pre>
      </div>  

      <p>Ændre den 4-cifrede pin-kode til en selvvalgt tal-kode.</p>
      <div class="nano-terminal">
        <div class="nano-header">
            <span>GNU nano 6.2</span> <span class="file-path">.env</span> <span> </span> <span></span>
        </div>
        <div class="nano-content">pin='1234'
        </div>
        <div class="nano-footer">
          <div class="nano-status"><p>[ Read 1 line ]</p></div>
            <div class="nano-help">
                <span>^G Help</span> <span>^O Write Out</span> <span>^W Where Is</span> 
                <span>^K Cut</span> <span>^T Execute</span> <span>^C Location</span> <span>M-U Undo</span>
            </div>
            <div class="nano-help">
                <span>^X Exit</span> <span>^R Read File</span> <span>^\ Replace</span> 
                <span>^U Paste</span> <span>^J Justify</span> <span>^/ Go To Line</span> <span>M-E Redo</span>
            </div>
          </div>
        </div>
        <p>Gem med CTRL+O herefter Enter.</p>
        <p>Exit nano med CTRL+X</p>

        <p class="info">OBS: Flask-serveren skal genstartes hvis pin-koden ændres imens flask-serveren kører.</p>  
    </section>

    <section>
      <div id="Opsætning_systemctl" class="__chapter_menu_subheader_1">
        <h3>Oprettelse af en Systemd-tjeneste</h3>
      </div>
      <p class="info">OBS: Dette er ikke strængt nødvendigt, men kan lette vores arbejde med at holde LEGO-Vault serveren kørende.</p>  

      <p>Vores Flask-server vil lukke, selv hvis den er detacheret fra terminalen, når brugeren logger ud eller lukker SSH-forbindelsen.</p>
      <p>Vi kan med fordel oprette en systemd-tjeneste til lego_vault-scriptet, som starter hver gang vi booter Pi’en.</p>

      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code><span class="rpi"><span class="dir">~</span><span class="command">sudo nano /etc/systemd/system/lego_vault.service</span></span>
        </code></pre>
      </div>   

      <p>Her skal vi bruge <i>systemd</i>, som er et system- og servicehåndteringsværktøj, der bruges i de fleste moderne Linux-distributioner (f.eks. Ubuntu, Debian, Raspberry Pi OS). Vi opretter filen lego_vault.service med <i>nano-editoren</i> med administrationsrettigheder (sudo), og skriver en konfiguration til systemd-service.</p>
      <p>Kopier teksten nedenfor og gem:</p>

      <div class="terminal nano-terminal">
        <div class="nano-header">
            <span>GNU nano 6.2</span> <span class="file-path">/etc/systemd/system/lego_vault.service</span> <span> </span> <span></span>
        </div>
        <div class=" nano-flex">
          <button class="copy-btn">Copy</button>
        </div>
        <div class="nano-content"><code class="command">[Unit]
Description=uWSGI instance to server LEGO Vault Project
After=network.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi/LEGO_Vault/
Environment="PATH=/home/pi/LEGO_Vault/venv/bin"
ExecStart=/home/pi/LEGO_Vault/venv/bin/python3 /home/pi/LEGO_Vault/app.py

[Install]
WantedBy=multi-user.target
</code>
        </div>
        <div class="nano-footer">
          <div class="nano-status"><p>[ Read 1 line ]</p></div>
          <div class="nano-help">
              <span>^G Help</span> <span>^O Write Out</span> <span>^W Where Is</span> 
              <span>^K Cut</span> <span>^T Execute</span> <span>^C Location</span> <span>M-U Undo</span>
          </div>
          <div class="nano-help">
              <span>^X Exit</span> <span>^R Read File</span> <span>^\ Replace</span> 
              <span>^U Paste</span> <span>^J Justify</span> <span>^/ Go To Line</span> <span>M-E Redo</span>
          </div>
        </div>
      </div>

      <p>Gem med CTRL+O herefter Enter.</p>
      <p>Exit nano med CTRL+X</p>

      <div class="forklaring">
        <p>Forklaring</p>
        <ul>
          <li>[Unit] → sektionen der beskriver hvad servicen er, og hvornår den skal starte.</li>
          <li>Description → en kort tekst der forklarer formålet med servicen.</li>
          <li>After=network.target → servicen starter først når netværket er klar.</li>
          <br>
          <li>[Service] → sektionen der fortæller hvordan servicen skal køre.</li>
          <li>Type=simple → servicen kører som et almindeligt program i baggrunden.</li>
          <li>User=pi → servicen kører som brugeren “pi”.</li>
          <li>WorkingDirectory=/home/pi/LEGO_Vault/ → den mappe programmet starter i.</li>
          <li>Environment="PATH=/home/pi/LEGO_Vault/venv/bin" → angiver hvor virtualenv-Python ligger.</li>
          <li>ExecStart=… → kommandoen systemd skal køre for at starte programmet.</li>
          <br>
          <li>[Install] → sektionen der styrer installation og autostart.</li>
          <li>WantedBy=multi-user.target → gør at servicen automatisk starter ved boot.</li>
        </ul>
      </div>

      <p>Aktivér tjenesten med:</p>
      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code><span class="rpi"><span class="dir">~</span><span class="command">sudo systmectl start lego_vault.service</span></span>
        </code></pre>
      </div>  

      <p>Eller aktiver den permanent – så den starter automatisk, når Pi’en booter:</p>
      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code><span class="rpi"><span class="dir">~</span><span class="command">sudo systemctl enable lego_vault.service</span></span>
        </code></pre>
      </div>  
    </section>
  </section>


  <!-- ### FLASK WEBSERVER ###-->
  <section class="content new-chapter">
    <div id="flask" class="__chapter_menu_container">
      <h2 class="menu-chapter-title chapter-title">Flask Webserver</h2>
    </div>
    <div id="flask_start" class="__chapter_menu_subheader_1">
      <h3>Start webserveren</h3>
    </div>

    <p>Efter vi har aktiveret vores virtuelle miljø, udpakket zip-filen og ændret vores pin-kode, kan vi starte vores Flask server:</p>
    <section>
      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="dot red"></span>
          <span class="dot yellow"></span>
          <span class="dot green"></span>
          <span class="terminal-title"></span>
          <div class="title">
            <span>ssh</span>
            <button class="copy-btn">Copy</button>
          </div>
        </div>
        <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">flask --app app run --host=0.0.0.0</span>
        </code></pre>
      </div>      
    </section>

    <div class="chapter-text">
      <section class="highlight_attention">
        <p class="info">OBS: Hvis I starter webserveren uden at have tilsluttet <i>Build HAT'en</i> lukker appen med en fejl<br>
          Kontrollerer også om Build HAT'en er påsat korrekt og at motor er isat den korrekte port (default er port C).</p>

        <div class="terminal linux">
          <div class="terminal-header-linux">
            <span class="terminal-title-output">Output</span>
            <span class="title">ssh</span>
          </div>
          <pre><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">flask --app app run --host=0.0.0.0</span>  
      File "/home/pi/LEGO_Vault/venv/lib/python3.10/site-packages/buildhat/serinterface.py", line 114, in __init__
        if device == "/dev/serial0" and os.readlink(device) == "ttyAMA10":
    FileNotFoundError: [Errno 2] No such file or directory: '/dev/serial0'  
<span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command"></span>  
          </code></pre>
        </div>
        <p>Hvis outputtet ser ud som ovenfor, er der sket en fejl. Det er svært at guide med fejlsøgning, men prøv at læs/forstå fejlmeldingen. Det er selvfølgelig vigtigt at det er den korrekte motorport der bliver brugt.
        Derudover benyttes der også en seriel port <i>"device"</i> til at overføre og modtage data fra motoren.
      
        <p>I zip-filen findes filen; <i>flask_tester.py</i>. I den er alt med LEGO modulet fjernet og der oprettes kun en Flask webserver. Forsøg evt. at starte den med: <i>flask --app flask_tester.py run --host=0.0.0.0</i></p>

      </section>

      <div class="terminal linux">
        <div class="terminal-header-linux">
          <span class="terminal-title-output">Output</span>
          <span class="title">ssh</span>
        </div>
        <pre><code><span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command">flask --app app run --host=0.0.0.0</span>  
 * Serving Flask app 'app_webtester.py'
 * Debug mode: off
2025-09-12 15:36:31,391 - werkzeug - INFO - WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.79:5000
2025-09-12 15:36:31,392 - werkzeug - INFO - Press CTRL+C to quit

<span class="venv"></span><span class="dir">~/LEGO_Vault</span><span class="command"></span>  
        </code></pre>
      </div>

      <p>Hvis outputtet ser ud som ovenfor, kører <i>Flask</i> serveren korrekt og I burde nu kunne tilgå hjemmesiden på port 5000 ved at indtaste ipaddressen på pi'en: &lt;pi-idaddresse&gt;<b>:</b>5000/</p>
      <p>Eks. 192.162.0.79:5000</p>
      <p>Såfremt alt kører som det skal, vil I blive prsæenteret for en key-pad, som vist nedenfor:</p>

      <img class="center-image" src="images/keypad.png" alt="image of keypad" width=100%>
      <figcaption>Flask app hosting keypad.</figcaption>


      <p>Test eventuelt din pin-kode og se hvad du får adgang.</p>
      <p>Du kan låse boksen igen ved at taste 0000#.</p>
    </div>
  </section>

  <!-- ###   HACK DIG IND    ###-->
  <section class="content new-chapter">
    <div id="hack" class="__chapter_menu_container">
      <h2 class="menu-chapter-title chapter-title">Hack dig ind</h2>
    </div>
    <div id="hack_sikkerhed" class="__chapter_menu_subheader_1">
      <h3>Problemstillinger</h3>
    </div>
    <p>Overvej følgende problemstillinger:</p>
    <ul>
      <li>Hvad sker der, hvis man gætter PIN?</li>
      <li>Hvor mange forsøg skal man bruge for at gætte en 4-cifret kode?</li>
      <li>Hvordan kan man gøre systemet mere sikkert?</li>
    </ul>
    <p>Snak om de ovenstående problematikker.</p>
    <p>Efterfølgende kan I prøve at sende et <i>POST request</i> til flask-serveren - her kan I bruge cURL, som oftes er installered på Linux, Windows og Mac.</p>


    <div id="hack_curl" class="__chapter_menu_subheader_1">
      <h3>Send requests med cURL</h3>
    </div>
    <p>De fleste styresystemer har installeret cURL som standard. Vi kan prøve at sende et HTTP POST request med cURL i kommandoprompten:</p>
    <div class="terminal">
      <div class="terminal-header">
        <span class="terminal-title">Kommandoprompt</span>
        <span class="title"></span>
      </div>
      <pre><code class="dos">curl -d "pincode=2121" -X POST http://&ltflask-server-ip&gt:5000/process
      </code></pre>
    </div>
    <div class="forklaring">
      <p>Forklaring</p>
      <ul>
        <li>curl → Et værktøj i terminalen til at lave HTTP-anmodninger (GET, POST osv.).</li>
        <li>-d "pincode=2121" → d (eller --data) betyder “send dette data i anmodningens body”.</li>
        <li>X POST → Angiver HTTP-metoden POST eksplicit.</li>
        <li>http://&lt;flask-server-ip&gt;:5000/process → URL’en til serveren.</li>
      </ul>
    </div>
    
    <p>Hvis I har cURL installeret (formentlig), kan I prøve at sende en korrekt PIN og en forkert PIN — observer serverens respons og hvad der sker med LEGO-låsen.</p>  
    <p>Sammenlign de to outputs - hvad ser I?</p>

    
    <div id="hack_output" class="__chapter_menu_subheader_1">
      <h3>Undersøg server respons</h3>
    </div>
    <p>Vi kan prøve at sende et request og derefter kigge reqsponsen igennem. Vi kan evt. benytte os af browserens <i>udviklerværktøjer</i> eller Burp Suite - jeg benytter mig af <i>Burp Suit</i> - forklaringen og opsætningen af <i>Burp Suit</i> falder dog uden for, hvad dette forløb dækker.</p>
    <p>Nedenfor kan ses et udsnit af responset set i Chromes udviklerværktøj og Burp Suit:</p>

    <img class="center-image" src="images/developer-tools-request-response.png" alt="image of Burp Suite request" width=100%>
    <figcaption>Chromes uddviklerværktøjer: Request & Response</figcaption>
    
    <br>
    <img class="center-image" src="images/burpSuit-request-response.png" alt="image of Burp Suite request" width=100%>
    <figcaption>Burp Suit: Request & Response</figcaption>

  
    <p>Til venstre i vores Burp Suit eksempel, ser vi vores request. Her kan vi se, at vi sender et <i>POST</i> request til <i>/process</i> med <i>pincode=1234</i> som data.</p>
    <p>På højre side kan vi se serverens respons. Vi kan bl.a. se at vi får <i>DENIED</i> tilbage i html-tekste.
    <br>
    Dette kan vi bruge til at skrive et python script.</p>

    <div id="hack_python" class="__chapter_menu_subheader_1">
      <h3>Send requests med python</h3>
    </div>
    <p>Vi kan skrive et script i <i>python</i> der sender et <i>request</i> magen til det vi sendte med cURL.</p>
    <p>I kan prøve at skrive jeres eget script, eller hente det viste script nedenfor her: <a href="https://github.com/AleksHolland84/lego_vault_undervisning/blob/main/basic-requests.py" target="_blank">github.io</a></p>
    <img class="center-image" src="images/github-basic.png" alt="image of Burp Suite request" width=100%>
    <p class="info">OBS: Pythons requests-modul er ikke installeret som standard på Windows og skal derfor installeres med <i>pip</i></p>
    <p>Prøv at benytte python-scriptet til at sende et request med en pinkode til serveren. Test derefter responsen for, om det indeholder "DENIED". Hvis responsens tekst indeholder "DENIED" printes pinkoden til terminalen sammen med det DENIED.</i>.
    Såfremt responsens tekst ikke indeholder "DENIED" printes pinkoden til terminalen sammen med et ACCESS WITH PIN:...</p>
  </section>

  <section class="content new-chapter">
    <p>Hvis vi vil, kan vi opsætte et virtuelt miljø til at køre vores python script.</p>
    <p>Først opretter jeg en mappe, der skal indeholde mine filer osv.<br>
    Derefter opretter jeg et virtuelt miljø, aktiverer det og installer python-modulet.</p>

    <div class="terminal linux">
      <div class="terminal-header-linux">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
        <span class="terminal-title"></span>
        <div class="title">
          <span>ssh</span>
          <button class="copy-btn">Copy</button>
        </div>
      </div>
<pre><code><span class="rpi"><span class="dir">~</span><span class="command">mkdir BruteForceLegoVault</span>
<span class="rpi"><span class="dir">~</span><span class="command">cd BruteForceLegoVault</span>
<span class="rpi"><span class="dir">~/BruteForceLegoVault</span><span class="command">python3 -m venv bruteForceVenv</span>
<span class="rpi"><span class="dir">~/BruteForceLegoVault</span><span class="command">. ./bruteForceVenv/bin/activate</span>
<span class="bruteForceVenv"></span><span class="dir">~/BruteForceLegoVault</span><span class="command">pip install requests</span></span></span></span></span>
</code></pre>
    </div>

    <div class="forklaring">
      <p>Forklaring</p>
      <ul>
        <li>mkdir → “make directory” - laver en ny mappe med navn <i>BruteForceLegoVault</i></li>
        <li>cd → "change directory”; bruges til navigerer. Her går vi ind i vores nylig lavet mappe.</li>
        <br>
        <li>python3 → vi bruger Python version 3.</li>
        <li>-m venv → beder Python om at bruge modulet venv (virtual environment).</li>
        <li>bruteForceVenv → navnet på det nye miljø (en mappe, der oprettes).</li>
        <br>
        <li>. → betyder “kør denne fil i den nuværende terminal”.</li>
        <li>./bruteForceVenv/bin/activate → aktiverer det virtuelle miljø.</li>
        <li>pip → Python’s pakkehåndtering (ligner en “app store” for Python).</li>
        <li>install → kommandoen til at installere en pakke.</li>
        <li>requests → navnene på de pakker vi skal bruge.</li>
      </ul>
    </div>


    <p>Inden vi tester vores script, skal vi have ændret ip-addressen og pinkoden i scriptet. Her bruger vi igen nano.<br>
    Sæt &lt;IP-ADDRESS&gt; til den ip addresse I noterede i starten (serveres ip addresse). Ændre også pinkoden til den 4-cifret pinkode I vil teste (husk: 0000 læser boksen)</p>
    <div class="terminal linux">
      <div class="terminal-header-linux">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
        <span class="terminal-title"></span>
        <div class="title">
          <span>ssh</span>
          <button class="copy-btn">Copy</button>
        </div>
      </div>
        <pre><code><span class="bruteForceVenv"></span><span class="dir">~/BruteForceLegoVault</span><span class="command">nano basic-requests.py</span>
        </code></pre>
    </div> 
    
    <div class="nano-terminal">
        <div class="nano-header">
            <span>GNU nano 6.2</span> <span class="file-path">basic-requests.py</span> <span> </span> <span></span>
        </div>
        <div class="nano-content"><code>#---------------------------------------------------------#
#                        MODULER                        #
#---------------------------------------------------------#
import requests #importerer requests modulet


#---------------------------------------------------------#
#                        VARIABLER                        #
#---------------------------------------------------------#
# URL'ens opbygning: Protocol (http://),  IP/DOMÆNENAVN (e.g. 192.168.0.79), Port (:5000) og Sti (/process)
url = "http://&lt;IP-ADDRESS&gt;:5000/process" # ændre IP-ADDRESSE 
pin = "0001" # Vi sætter vores pinkode til "0001" # 
payload = {"pincode": pin} # data der skal sendes der 


# Sæt response-objektet til at være "response". 
# Response-objektet sender et POST request til vres url med vores payload.
response = requests.post(f"{url}", data = payload)

# Hvis respons attributten (.text) indeholder "DENIED" skal terminale printe PIN + vores pinkode + DENIED
if "DENIED"  in response.text:
    print(f"PIN {pin} DENIED")
# Ellers skal den printe ACCESS WITH PIN: vores pinkode
else:
    print(f"""################### ACCESS WITH PIN: {pin} ####################""")
      </code>
    </div>
    <div class="nano-footer">
      <div class="nano-status"><p>[ Read 1 line ]</p></div>
        <div class="nano-help">
            <span>^G Help</span> <span>^O Write Out</span> <span>^W Where Is</span> 
            <span>^K Cut</span> <span>^T Execute</span> <span>^C Location</span> <span>M-U Undo</span>
        </div>
        <div class="nano-help">
            <span>^X Exit</span> <span>^R Read File</span> <span>^\ Replace</span> 
            <span>^U Paste</span> <span>^J Justify</span> <span>^/ Go To Line</span> <span>M-E Redo</span>
        </div>
      </div>
    </div>
    <p>Gem med CTRL+O herefter Enter.</p>
    <p>Exit nano med CTRL+X</p>

    <p>Vi kan nu prøve at eksikver scriptet:</p>
        <div class="terminal linux">
      <div class="terminal-header-linux">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
        <span class="terminal-title"></span>
        <div class="title">
          <span>ssh</span>
          <button class="copy-btn">Copy</button>
        </div>
      </div>
        <pre><code><span class="bruteForceVenv"></span><span class="dir">~/BruteForceLegoVault</span><span class="command">python3 basic-requests.py</span>
      </code></pre>
    </div> 

    <div class="terminal linux">
      <div class="terminal-header-linux">
        <span class="terminal-title-output">Output</span>
        <span class="title">ssh</span>
      </div>
        <pre><code><span class="bruteForceVenv"></span><span class="dir">~/BruteForceLegoVault</span><span class="command">python3 basic-requests.py</span>
PIN 0001 DENIED

</code></pre>
    </div>
  </section>

  <section class="content new-chapter">
    <p>Vi har nu testet vores python script og lært at sende ét enkelt request.</p>
    <div id="hack_sikkerhed2" class="__chapter_menu_subheader_1">
      <h3>Problemstillinger (Python)</h3>
    </div>
    <p>Overvej følgende problemstillinger:</p>
    <ul>
      <li>Hvordan kan vi bruge python til at sende et nyt request, hver gang vi modtager "DENIED"?</li>
      <li>Hvor lang tid ville det mon tage at sende alle 9999 mulige kombinationer?</li>
      <li>Hvordan kan man gøre LEGO-vault systemet mere sikkert?</li>
    </ul>
    <p>Snak om de ovenstående problematikker.</p>
    <p>Efterfølgende kan I prøve at udvikle scriptet så det automatisk sender et nyt request, indtil den korrekte pin findes.</p>

    
  </section>









  <!-- FOOTER START --> 
  <footer>
    <a class="svglink" target="_blank" href="https://github.com/AleksHolland84">
      <svg arole="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">
        </path>
      </svg>
    </a>
    <br><br>
     <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
  </footer>
  <!-- FOOTER END --> 
  

  </div><!-- main-content-wrapper end-->


  <!-- CHICKEN 
  <div class="margin-text" id="chickenTrigger">don't click</div>
    <img src="images/chicken.png" alt="Chicken" class="chicken" id="chicken">
  </div>
-->
  <script src='scripts/script.js'></script>
  <script src='scripts/menu.js'></script>
  <script src='scripts/dont_click.js'></script>
</body>

</html>